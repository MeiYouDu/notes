# 二进制位运算符
## 概述
二进制位运算符，直接对二进制位进行计算，如下：

- 二进制或运算符（or）：符号为`|`，表示若两个二进制位都为0，则结果为0，否则为1。
- 二进制与运算符（and）：符号为`&`，表示若两个二进制位都为1，则结果为1，否则为0。
- 二进制否运算符（not）：符号为`~`，表示对一个二进制位取反。
- 异或运算符（xor）：符号为`^`，表示若两个二进制位不相同，则结果为1，否则为0。
- 左移运算符（left shift）：符号为`<<`，详见下文解释。
- 右移运算符（right shift）：符号为`>>`，详见下文解释。
- 头部补零的右移运算符（zero filled right shift）：符号为`>>>`，详见下文解释。

这些位运算符直接处理每一个比特位（bit），所以是非常底层的运算，好处是速度极快，缺点是很不直观，许多场合不能使用它们，否则会使代码难以理解和查错。
有一点需要特别注意，位运算符只对整数起作用，如果一个运算子不是整数，会自动转为整数后再执行。另外，虽然在 JavaScript 内部，数值都是以64位浮点数的形式储存，但是做位运算的时候，是以32位带符号的整数(![](https://cdn.nlark.com/yuque/__latex/80279840801e03210ed724f4f7085de6.svg#card=math&code=-2%5E%7Bn-1%7D%E5%88%B02%5E%7Bn-1%7D-1&id=D9Rua)，如果小于或者大于都会会导致整溢出，javascript中默认使用二进制补码的方法处理这个问题)进行运算的，并且返回值也是一个32位带符号的整数。
## 二进制或运算符
二进制或运算符`（|）`逐位比较两个运算子，两个二进制位之中只要有一个为1，就返回1，否则返回0。
`0 | 3 // 3 `
上面代码中，0和3的二进制形式分别是00和11，所以进行二进制或运算会得到11。
需要注意的是位运算符只对整数有效，遇到小数会把小数部分舍去。
## 二进制与运算符
二进制与运算符`（&）`的规则是逐位比较两个运算子，两个二进制位之中只要有一个位为0，就返回0，否则返回1。
`0 & 3 // 0 `
上面代码中，0（二进制00）和3（二进制11）进行二进制与运算会得到00（即0）。
## 二进制否运算符
二进制否运算符`（~）`将每个二进制位都变为相反值`（0变为1，1变为0）`。它的返回结果有时比较难理解，因为涉及到计算机内部的数值表示机制。
`~ 3 // -4 `
上面表达式对3进行二进制否运算，得到-4。之所以会有这样的结果，是因为位运算时，JavaScript 内部将所有的运算子都转为32位的二进制整数再进行运算。
```javascript
~ 3 === -4; // true
// 3用二进制形式表示形式是0b00000000000000000000000000000011
// 通过否运算符转化之后就是0b11111111111111111111111111111100
// 32位有符号整型，0b11111111111111111111111111111100会造成整型溢出
// 32位有符号整型最大正值为(2**31)-1，超过的部分会从-(2 ** 31)开始。
```
## 异或运算符
异或运算`（^）`在两个二进制位不同时返回1，相同时返回0。
`0 ^ 3 // 3 `
上面表达式中，0（二进制00）与3（二进制11）进行异或运算，它们每一个二进制位都不同，所以得到11（即3）。
## 左移运算符

左移运算符`（<<）`表示将一个数的二进制值向左移动指定的位数，尾部补0，即乘以2的指定次方。向左移动的时候，最高位的符号位是一起移动的。因为是带符号的32位整型，当超过32位时，多出的数位则会被忽略（从最高位开始忽略）
```javascript
console.log(0b11111111111111111111111111111111 >>> 0); // 4294967295
console.log(0b11111111111111111111111111111111111 >>> 0); // 依旧是4294967295
console.log(0b11111111111111111111111111111111000 >>> 0); // 4294967288

console.log(0b11111111111111111111111111111111 >> 0); // -1
console.log(0b11111111111111111111111111111111111 >> 0); // 依旧是-1
console.log(0b11111111111111111111111111111111000 >> 0); // -8
```
## 右移运算符
右移运算符`（>>）`表示将一个数的二进制值向右移动指定的位数。如果是正数，头部全部补0；如果是负数，头部全部补1。右移运算符基本上相当于除以2的指定次方（最高位即符号位参与移动）。
## 头部补零的右移运算符
头部补零的右移运算符`（>>>）`与右移运算符`（>>）`只有一个差别，就是一个数的二进制形式向右移动时，头部一律补零，而不考虑符号位。所以，该运算总是得到正值。对于正数，该运算的结果与右移运算符`（>>）`完全一致，区别主要在于负数。这个运算实际上将一个值转为32位无符号整数。（上面的六种运算符都是返回带符号的32位整型，这个运算符返回无符号的32位整型）。
# 其他运算符，运算顺序
## 逗号运算符
逗号运算符用于对两个表达式求值，并返回后一个表达式的值
```javascript
// 逗号运算符(comma)
let a, b;
a = 1, b = 2;
```
# 链判断运算符
![image.png](https://cdn.nlark.com/yuque/0/2022/png/12763837/1649728837538-678cdda3-d2d0-4524-b3fe-7b64b31d4ce0.png#averageHue=%23858585&clientId=uc95299e8-9c32-4&from=paste&id=u77c78cc2&originHeight=818&originWidth=1390&originalType=url&ratio=1&rotation=0&showTitle=false&size=179713&status=done&style=none&taskId=ua8bc8058-b0f8-46e5-930d-8af21415497&title=)
总的来说，之前如果想判断一个对象中的属性是否存在，尤其是嵌套的比较深的时候比较麻烦，所以在es2020中引入了"?."运算符。像上面的情况这样写就行了。
const firstName =message?.body?.user?.firstName ||'default';

需要注意的是：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/12763837/1649728837453-a1a81db4-7d3f-4ed1-9be4-38f1365e080f.png#averageHue=%23515151&clientId=uc95299e8-9c32-4&from=paste&id=u378cc453&originHeight=886&originWidth=1422&originalType=url&ratio=1&rotation=0&showTitle=false&size=123794&status=done&style=none&taskId=u6d8cdff8-5952-4c85-8c54-13ec8dffb72&title=)
# null判断运算符
对象属性的值是null或者undefined时，可能需要给他们设置默认值，以前通过"||"来设置默认值，但如果属性本身时false或者0就会导致进入默认值判断，所以在es2020引入了"??"运算符，他的行为跟"||"类似，不同的是他只有左边的值是null或者undefined时候才会返回右边的值。

![image.png](https://cdn.nlark.com/yuque/0/2022/png/12763837/1649728837580-c13baf0a-f73c-42ab-8be4-4a033e812c2f.png#averageHue=%23a0a0a0&clientId=uc95299e8-9c32-4&from=paste&id=ub9ed46ee&originHeight=472&originWidth=1370&originalType=url&ratio=1&rotation=0&showTitle=false&size=145640&status=done&style=none&taskId=u3762bb65-62af-42ac-bf66-be4272f6429&title=)
需要的注意的是，"??"是个逻辑运算符，他跟"&&"和"||"会因为使用顺序的不同导致不同的结果，所以一起使用的时候必须通过括号表示优先级。
# 逻辑赋值运算符
![image.png](https://cdn.nlark.com/yuque/0/2022/png/12763837/1649728837603-23bb071c-fe8c-49bb-b00c-e91c48559977.png#averageHue=%235d5d5d&clientId=uc95299e8-9c32-4&from=paste&id=u780c98ab&originHeight=1026&originWidth=1368&originalType=url&ratio=1&rotation=0&showTitle=false&size=160150&status=done&style=none&taskId=u49c7543b-cc73-4876-8684-faa1f53ac20&title=)
