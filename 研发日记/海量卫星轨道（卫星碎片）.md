# 需求
支持卫星轨道绘制以及碎片绘制。
# 分析
czml绘制卫星轨道没问题，但是数据量大的时候会导致明显的卡顿。如果用绘制卫星轨道的方式绘制碎片（数量非常大），会导致性能非常差。
# 目标
支持绘制大量的卫星（碎片）以及轨道（碎片轨道）。（卫星轨道同时显示或者只显示卫星，不显示轨道，只有点击卫星的时候再绘制轨道）。
# 实现过程
## 2022-04-19
假如通过point primitive绘制海量点。但是point primitive似乎没有办法根据时间动起来，不太方便更新轨迹。
### 方案：

1. 监听时间线，自建模，根据时间来更新点的位置。
- 经过测试，如果点重合时候会明显导致性能降低，测试中10万个点重合成4个点，帧率会变得很低。
- 这种方式更新点位置最大的缺点就是如果数据本身密度不够的时候，会导致更新的频率过低，缺少平滑的过渡。
- 如果根据步长来计算，然后模拟碎片移动不知道性能如何，两点之间的坐标差/步长。（如果考虑到点的准确性，这种做法是不可取的）。
2. 根据时间来重复的清空和创建新的点，这样看起来方案1效果是一样的，但是理论上性能也会很差所以暂时舍弃这个方法。
## 2022-04-20
cesium官方提供了3dtile，是通过绘制点云（海量的点）来展示各种图形。同时官方提供了dynamic point cloud，可以通过时间来控制点的变化。这似乎让时间控制海量点的位置成了可能。
## 2022-04-25
### 最终实现方案

1. 通过pointPrimitve和pointCollection绘制海量点。
2. 根据点集合数据类似下面这样的数据结构，监听一下timeline，当时间流逝到300秒、600秒以次类推，每当有匹配的值时都去更新point的位置。到这里就可以让海量点动起来了。（在cesium-drawer项目中可以做到十万点随时间移动并流畅运行）。
```json
{
  "cartesian": [
    0,
    -6461484.132473268,
    -3069076.9719843175,
    -258401.96416858493,
    300,
    -6157520.744201012,
    -3077714.4131795713,
    1951307.6934748571,
    600,
    -5254991.728536703,
    -2787170.142922886,
    3970837.942012478,
    900,
    -3841711.150750166,
    -2225732.447317882,
    5603464.1273063775,
    1200,
  ]
}
```

3. 如果步长（点集合两个点之间的时间间隔）很大，会导致点位置更新的频率比较低，所以看起来会一跳一跳的，解决这个问题的话有两个方式
   - 自己写一个差值算法，在两个点之间插入更多的点数据，也就是减少步长。
   - 要求服务端计算的时候返回更密集的点集合，同样也是减少步长。

